# Assignment 2 — Dual Router MF Dashboard (Routing + Data Fetching)

## Goals

* Demonstrate **routing** with **both** Next.js routers in **one project** without collisions.
* Use **CSR, SSR, SSG, ISR** across routes.
* Build **≥ 8 routes** (with **dynamic routes** in each router) and **≥ 8 components**.
* Keep UI Material Design, **mobile-first**, simple and clear.

> **Allowed MFAPI endpoints (only these):**
>
> * List all schemes: `GET https://api.mfapi.in/mf`
> * Scheme details (incl. NAV history): `GET https://api.mfapi.in/mf/<schemeCode>`
>   *(Latest NAV is the first element of `data[]` for most schemes. If the array isn’t sorted, students must sort by `date` descending.)*

---

## Route Map (8 routes total)

### A) App Router (under `app/learn/*`)

1. **`/learn` — SSG (no fetch)**

   * Static overview of the app, routers, and rendering modes.
   * Cards linking to all `/learn/*` and `/market/*` pages.

2. **`/learn/funds` — ISR (server fetch, revalidate daily)**

   * **Data:** For a **curated list** of 10 scheme codes [122639,120492,125497,118825,125354,118955,120166,120586,118778,130503], fetch each: `GET /mf/<code>`.
   * **Output:** A list/grid of fund summaries:

     * `scheme_name`, latest `NAV`, latest `date` (from `data[0]`), and a link to `/learn/fund/<code>`.
   * **Revalidate:** `86400` seconds (once per day).

3. **`/learn/fund/[code]` — SSR (dynamic)**

   * **Data:** `GET /mf/<code>`.
   * **Output:**

     * Header: `scheme_name`, latest NAV + date.
     * “Last 30 entries” table (date, NAV) or a simple sparkline summary text.
   * **Edge cases:** If `code` invalid or no data → show meaningful error state.

4. **`/learn/tools` — CSR (client fetch)**

   * **Data:** When user types a **scheme code** or **partial scheme name**, your UI:

     * should ask user to enter a **scheme code** directly, then fetch `GET /mf/<code>`.
   * **Output:** Search field; tap result to show a compact fund summary (name, latest NAV, date).

---

### B) Pages Router (under `pages/market/*`)

5. **`/market` — ISR via `getStaticProps` (server fetch, revalidate hourly)**

   * **Data:** For 5 scheme codes (fixed list), fetch each: `GET /mf/<code>`.
   * **Output:** “Market snapshot” list of 5 fund cards:

     * Latest NAV + date, and a **computed** simple 1-month return (%), derived from NAV \~30 days back (nearest date).
   * **Revalidate:** `3600` seconds.

6. **`/market/fund/[code]` — SSR via `getServerSideProps` (dynamic)**

   * **Data:** `GET /mf/<code>`.
   * **Output:** Detail view focused on **recent performance**:

     * Latest NAV + date
     * Computed trailing returns: **1m, 3m** (approximate: compare to NAV near those look-back dates).
     * Short “Data note” if exact date isn’t present (“Using nearest available NAV within ±3 days”).
   * **Edge cases:** Invalid code → error/empty state.

7. **`/market/compare` — CSR (client fetch)**

   * **Data:** User can enter **up to 3 scheme codes** and fetch each: `GET /mf/<code>`.
   * **Output:** A simple comparison table:

     * Columns per scheme, rows: Latest NAV, Latest Date, Approx. 3m Return, Approx. 6m Return.
     * Rebase NAVs to **100** on the oldest common date in the selected range for a fair “growth since” figure (textual summary is fine if you don’t want charts).

8. **`/market/about` — SSG via `getStaticProps` (no fetch)**

   * **Output:** Static explainer:

     * How the **App Router** (`/learn/*`) and **Pages Router** (`/market/*`) live together.
     * Which routes use CSR/SSR/SSG/ISR.
     * Data source and limitations (MFAPI delays, holidays, missing NAVs).

---

## Component Checklist (≥ 8, JS/JSX, Material UI)

1. **NavBar** — global top navigation (links to Learn, Funds, Tools, Market, Compare, About).
2. **AppLinkCard** — title + description + CTA used on `/learn` and `/market/about`.
3. **FundSummaryCard** — shows `scheme_name`, latest NAV, date, and a deep link (used on snapshots and lists).
4. **FundList** — renders a responsive grid/list of `FundSummaryCard` items (used in `/learn/funds` and `/market`).
5. **FundDetail** — structured details for a single fund (header + recent NAVs table or summary).
6. **CompareTable** — tabular comparison across up to 3 funds (latest NAV, returns).
7. **SearchBar** — input + submit; optional debounce; used on `/learn/tools` and `/market/compare`.
8. **EmptyState** — friendly message for no results/invalid codes; suggests trying a different code.

*(Nice-to-have extras that don’t count toward the 8 if you’re already at 8: `ErrorBanner`, `LoadingSkeleton`, `Footer`, `Breadcrumbs`.)*

---

## Data Rules (consistent across routes)

* **Latest NAV:** pick the most recent entry in `data[]`. If the API already orders newest-first, use `data[0]`; otherwise sort by `date` descending.
* **Trailing returns (approximate):**

  * For 1m/3m/6m, find the **nearest available NAV** to the target look-back date (±3 days window).
  * Return (%) = `(LatestNAV - PastNAV) / PastNAV * 100`.
  * If no past NAV in window → show “—” and add a short note.
* **Date handling:** show **ISO date** or “DD-MM-YYYY” consistently.
* **Invalid codes / missing data:** render `EmptyState` with guidance.
* **Accessibility:** every interactive control labelled; result counts announced politely where applicable.

---

## Rendering Methods (what graders will look for)

* **SSG:** `/learn` (App Router), `/market/about` (Pages Router)
* **ISR:** `/learn/funds` (App Router, daily), `/market` (Pages Router, hourly)
* **SSR:** `/learn/fund/[code]` (App Router), `/market/fund/[code]` (Pages Router)
* **CSR:** `/learn/tools` (App Router), `/market/compare` (Pages Router)

> Each of the four methods must be clearly used at least once and justified in the README.

---

## Acceptance Criteria (route-by-route)

### `/learn` (SSG)

* Static content, zero network calls.
* Cards linking to all major pages.

### `/learn/funds` (ISR)

* Uses only MFAPI.
* Shows **10 curated codes** , each with `scheme_name`, latest NAV, date, and link to `/learn/fund/<code>`.
* Regenerates daily (no client fetch on load).

### `/learn/fund/[code]` (SSR)

* Loads on every request from MFAPI.
* Shows header + last **30** NAV entries (or clear recent summary).
* Invalid code handled gracefully.

### `/learn/tools` (CSR)

* User can search by code or (optionally) by name.
* Fetches only after user action.
* Renders a tiny summary for a selected scheme.

### `/market` (ISR via `getStaticProps`)

* Uses **5 fixed codes** for a snapshot.
* Displays latest NAV + date + approx. **1m return**.
* Revalidates hourly.

### `/market/fund/[code]` (SSR via `getServerSideProps`)

* Shows latest NAV + date + approx. **1m and 3m** returns.
* Notes any missing historical points.

### `/market/compare` (CSR)

* Accepts up to **3 codes**.
* Compares latest NAV, latest date, approx. **3m and 6m** returns.
* If some series don’t overlap, shows a clear note.

### `/market/about` (SSG)

* Explains router split and rendering choices.
* States **MFAPI** as the only data source and its limitations.

---

## README Requirements (short but specific)

* **Routing map**: list all 8 routes with which router and why.
* **Rendering rationale**: 1–2 lines per route explaining the chosen method.
* **Data notes**: how you compute returns and handle missing dates.
* **Env**: document where curated/fixed scheme codes live (`.env`).

---

