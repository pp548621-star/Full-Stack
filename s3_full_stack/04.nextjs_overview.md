# 4. Introduction to Next.js

### What is Next.js and Why Use It?

**Next.js** is an open-source **React framework** developed by Vercel, designed to simplify and enhance the development of production-ready web applications. It builds on React’s component-based architecture by adding powerful features like **server-side rendering (SSR)**, **static site generation (SSG)**, **file-based routing**, and **API routes**, making it ideal for building scalable, SEO-friendly, and performant web apps with minimal configuration.

**Why Use Next.js?**

- **Enhanced React Experience**: Extends React with built-in solutions for routing, rendering, and optimizations, reducing the need for external libraries (unlike Create React App’s manual setup).
- **SEO and Performance**: Supports **SSR**, **SSG**, and **Incremental Static Regeneration (ISR)**, ensuring fast page loads and crawler-friendly HTML, unlike React’s default client-side rendering (CSR) or Angular’s complex SSR setup with Universal.
- **Developer Productivity**: Simplifies development with conventions like file-based routing and automatic code splitting, offering a better developer experience than React’s manual configurations or Angular’s steeper learning curve.
- **Full-Stack Capabilities**: Built-in API routes allow you to create backend endpoints within the same project, unlike React, which requires a separate server.
- **Scalability**: Optimized for deployment on platforms like Vercel, Netlify, or AWS, with static hosting for SSG and ISR, making it more cost-effective than CSR-heavy apps.
- **Versatility**: Suitable for a wide range of projects, from static blogs to dynamic e-commerce platforms, offering more flexibility than Angular’s enterprise focus.

**Comparison Context** (from prior discussion):

- **Vs. React**: Next.js adds SSR/SSG, routing, and optimizations out of the box, addressing React’s SEO and performance limitations (e.g., CRA’s CSR issues).
- **Vs. Angular**: Next.js is lighter, easier to set up for SEO, and more web-focused, while Angular is heavier and suited for enterprise apps with complex logic.

### Core Features of Next.js

1. **File-Based Routing**:
    - Routes are defined by the file structure in the `pages/` (or `app/` in Next.js 13+) directory. No need for external routing libraries like React Router.
    - Example: `pages/about.js` creates the `/about` route.
    - Supports static, dynamic, and nested routes.
2. **Hybrid Rendering**:
    - **Client-Side Rendering (CSR)**: Like React, for dynamic, browser-based updates.
    - **Server-Side Rendering (SSR)**: Renders pages on the server per request (`getServerSideProps`).
    - **Static Site Generation (SSG)**: Pre-renders pages at build time (`getStaticProps`).
    - **Incremental Static Regeneration (ISR)**: Updates static pages dynamically without full rebuilds (`revalidate`).
3. **Built-in API Routes**:
    - Create backend endpoints in `pages/api/` (or `app/api/`), enabling full-stack development without a separate server.
    - Example: `pages/api/hello.js` creates an endpoint at `/api/hello`.

### When to Choose Next.js for a Project

- **SEO-Critical Projects**: Use for blogs, e-commerce, or marketing sites where search engine indexing is crucial, as SSR/SSG ensure crawler-friendly HTML (unlike React’s CSR or Angular without Universal).
- **Performance-Sensitive Apps**: Ideal for fast-loading sites (e.g., landing pages, portfolios) due to SSG/ISR and optimizations like `next/image`.
- **Full-Stack Applications**: Choose when you need frontend and backend in one project, leveraging API routes (unlike React’s need for a separate server).
- **Rapid Development**: Best for projects requiring minimal setup and fast iteration, thanks to conventions like file-based routing and TypeScript support.
- **Static or Hybrid Sites**: Perfect for static content (e.g., documentation, blogs) or hybrid apps with both static and dynamic pages.
- **Avoid Next.js If**:
    - You need a highly customized, client-only SPA with minimal SEO needs (use React with CRA).
    - You’re building a complex enterprise app with strict TypeScript and dependency injection requirements (consider Angular).

**Example Use Cases**:

- Blog or news site (SSG/ISR for fast, SEO-friendly pages).
- E-commerce platform (SSR for dynamic product pages, SSG for static content).
- Marketing landing pages (SSG for performance and SEO).
- Full-stack dashboard with API endpoints (API routes + SSR).

---

### Project Setup and Configuration

### Creating a New Next.js App

To start a Next.js project, use the `create-next-app` CLI, which sets up a pre-configured project with sensible defaults.

**Steps**:

1. Run the following command in your terminal:
    
    ```bash
    npx create-next-app@latest my-next-app
    
    ```
    
2. Follow the prompts to configure:
    - Choose TypeScript (optional).
    - Enable ESLint, Tailwind CSS, and the App Router (recommended for Next.js 13+).
3. Navigate to the project and start the development server:
    
    ```bash
    cd my-next-app
    npm run dev
    
    ```
    
4. Open `http://localhost:3000` to see the app.

### Project Structure Overview

A typical Next.js project structure (using the App Router, Next.js 13+):

```
my-next-app/
├── app/                    # Main directory for pages and layouts
│   ├── layout.js          # Root layout (required)
│   ├── page.js            # Home page (/)
│   ├── about/page.js      # About page (/about)
│   ├── api/               # API routes
│   └── [id]/page.js       # Dynamic route (e.g., /post/123)
├── public/                # Static assets (images, favicon, etc.)
├── styles/                # CSS files (e.g., globals.css)
├── next.config.js         # Next.js configuration
├── package.json           # Dependencies and scripts
├── .env.local             # Environment variables
├── jsconfig.json          # JavaScript/TS path aliases (optional)
└── README.md

```

- **Pages Router** (older, pre-Next.js 13): Uses `pages/` instead of `app/`, with similar conventions (e.g., `pages/index.js` for `/`).

### Config Files

1. **next.config.js**:
    - Customizes Next.js behavior (e.g., redirects, rewrites, image domains).
    - Example:
        
        ```jsx
        // next.config.js
        module.exports = {
          images: {
            domains: ['example.com'], // Allow external image domains
          },
          async redirects() {
            return [
              {
                source: '/old-page',
                destination: '/new-page',
                permanent: true,
              },
            ];
          },
        };
        
        ```
        
2. **.env.local**:
    - Stores environment variables for sensitive data (e.g., API keys).
    - Example:
        
        ```
        # .env.local
        NEXT_PUBLIC_API_URL=https://api.example.com
        PRIVATE_KEY=your-secret-key
        
        ```
        
    - `NEXT_PUBLIC_` prefix makes variables available client-side.
3. **jsconfig.json** (or `tsconfig.json` for TypeScript):
    - Configures path aliases for cleaner imports.
    - Example:
        
        ```json
        // jsconfig.json
        {
          "compilerOptions": {
            "baseUrl": ".",
            "paths": {
              "@components/*": ["components/*"]
            }
          }
        }
        
        ```
        

### TypeScript and Tailwind CSS (Optional Integration)

- **TypeScript**:
    - Create a TypeScript-enabled Next.js app:
        
        ```bash
        npx create-next-app@latest my-next-app --typescript
        
        ```
        
    - Adds `tsconfig.json` and converts files to `.tsx`. Next.js has first-class TypeScript support with zero configuration.
    - Example:
        
        ```tsx
        // app/page.tsx
        interface Props {
          title: string;
        }
        
        export default function Home({ title }: Props) {
          return <h1>{title}</h1>;
        }
        
        ```
        
- **Tailwind CSS**:
    - Install Tailwind during `create-next-app` or manually:
        
        ```bash
        npm install -D tailwindcss postcss autoprefixer
        npx tailwindcss init -p
        
        ```
        
    - Configure `tailwind.config.js`:
        
        ```jsx
        // tailwind.config.js
        module.exports = {
          content: [
            './app/**/*.{js,ts,jsx,tsx}',
            './components/**/*.{js,ts,jsx,tsx}',
          ],
          theme: {
            extend: {},
          },
          plugins: [],
        };
        
        ```
        
    - Add Tailwind directives to `styles/globals.css`:
        
        ```css
        /* styles/globals.css */
        @tailwind base;
        @tailwind components;
        @tailwind utilities;
        
        ```
        
    - Use Tailwind classes in components:
        
        ```jsx
        // app/page.js
        export default function Home() {
          return <h1 className="text-3xl font-bold text-blue-600">Welcome</h1>;
        }
        
        ```
        

---

### Basic Routing and Pages

### File-Based Routing

Next.js uses a **file-based routing system** where the file structure in `app/` (or `pages/` for older versions) defines routes.

- **Static Routes**:
    - File: `app/about/page.js`
    - Route: `/about`
    - Example:
        
        ```jsx
        // app/about/page.js
        export default function About() {
          return <h1>About Us</h1>;
        }
        
        ```
        
- **Dynamic Routes**:
    - File: `app/post/[id]/page.js`
    - Route: `/post/123`
    - Example:
        
        ```jsx
        // app/post/[id]/page.js
        export default function Post({ params }) {
          return <h1>Post ID: {params.id}</h1>;
        }
        
        ```
        
- **Nested Routes**:
    - File: `app/blog/category/[slug]/page.js`
    - Route: `/blog/category/tech`
    - Example:
        
        ```jsx
        // app/blog/category/[slug]/page.js
        export default function Category({ params }) {
          return <h1>Category: {params.slug}</h1>;
        }
        
        ```
        

### Custom 404 and Error Pages

- **Custom 404 Page**:
    - File: `app/not-found.js` (App Router) or `pages/404.js` (Pages Router)
    - Example:
        
        ```jsx
        // app/not-found.js
        export default function NotFound() {
          return <h1>404 - Page Not Found</h1>;
        }
        
        ```
        
- **Error Page**:
    - File: `pages/_error.js` (Pages Router only; App Router uses error boundaries)
    - Example:
        
        ```jsx
        // pages/_error.js
        function Error({ statusCode }) {
          return (
            <p>
              {statusCode
                ? `An error ${statusCode} occurred on server`
                : 'An error occurred on client'}
            </p>
          );
        }
        
        Error.getInitialProps = ({ res, err }) => {
          const statusCode = res ? res.statusCode : err ? err.statusCode : 404;
          return { statusCode };
        };
        
        export default Error;
        
        ```
        

### Linking Between Pages

- **Using `<Link>`**:
    - Next.js’s `<Link>` component enables client-side navigation without full page reloads.
    - Example:
        
        ```jsx
        // app/page.js
        import Link from 'next/link';
        
        export default function Home() {
          return (
            <div>
              <Link href="/about">Go to About</Link>
            </div>
          );
        }
        
        ```
        
- **Using `useRouter`**:
    - Programmatically navigate or access route information.
    - Example:
        
        ```jsx
        // app/page.js
        import { useRouter } from 'next/router'; // or 'next/navigation' for App Router
        
        export default function Home() {
          const router = useRouter();
          return (
            <button onClick={() => router.push('/about')}>
              Navigate to About
            </button>
          );
        }
        
        ```
---

### SEO, Performance, and UX Context

- **SEO**: Next.js’s **SSR**, **SSG**, and **ISR** make it superior for SEO compared to React’s CSR or Angular’s default setup. The `next/head` component simplifies adding meta tags, and static files (SSG/ISR) ensure crawlers index content quickly.
- **Performance**: Next.js’s hybrid rendering (SSR/SSG/ISR) and optimizations (e.g., `next/image`, code splitting) deliver faster **FCP** and **LCP** than CRA’s CSR, improving Core Web Vitals.
- **UX**: Instant content display with SSR/SSG and client-side navigation with `<Link>` enhance user engagement compared to CRA’s loading delays or Angular’s heavier bundles.

---

### Conclusion

**Next.js** is a powerful React framework that simplifies building SEO-friendly, performant, and scalable web applications. Its **file-based routing**, **hybrid rendering** (CSR, SSR, SSG, ISR), and **API routes** make it versatile for blogs, e-commerce, and full-stack apps. Compared to **React (CRA)**, it addresses SEO and performance issues with built-in rendering options. Compared to **Angular**, it’s lighter and easier to configure for web-focused projects. Use Next.js for projects needing **SEO**, **fast loads**, or **full-stack capabilities**, and set it up with TypeScript or Tailwind CSS for enhanced development. The provided artifacts demonstrate practical implementations for routing, SEO, and error handling.
