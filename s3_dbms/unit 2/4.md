
# Relational Algebra & Tuple Relational Calculus (TRC)


## 1. Introduction

Once we have designed relations (tables), the next step is **querying them**.

There are **two main theoretical query languages** in DBMS:

* **Relational Algebra (RA):** Procedural – tells **how to get data**.
* **Tuple Relational Calculus (TRC):** Declarative – tells **what data we want**, not how to get it.

Both are important because:

* **RA** forms the foundation of SQL query execution.
* **TRC** forms the foundation of high-level query languages.

---

## 2. Relational Algebra (Procedural)

Relational Algebra defines a set of **operations** on relations (tables).
Each operation takes one/more relations as input and produces a new relation as output.

---

### 2.1 Basic Operators

1. **Selection (σ)** → Selects rows.

   * Syntax: σ Condition (Relation)
   * Example 1: Get all students from *Ahmedabad*.

     ```
     σ City='Ahmedabad' (Student)
     ```
   * Example 2: Students with Marks > 80.

     ```
     σ Marks>80 (Student)
     ```

---

2. **Projection (π)** → Selects columns.

   * Syntax: π Attributes (Relation)
   * Example 1: Get student names and cities only.

     ```
     π Name, City (Student)
     ```
   * Example 2: Get CourseIDs of all enrolled students.

     ```
     π CourseID (Enrollment)
     ```

---

3. **Union (∪)** → Combines tuples from two relations (duplicates removed).

   * Syntax: Relation1 ∪ Relation2
   * Example: Students enrolled in DBMS ∪ Students enrolled in DSA.

---

4. **Set Difference (−)** → Tuples in one relation but not another.

   * Example: Students in DBMS − Students in DSA.

---

5. **Intersection (∩)** → Tuples common to two relations.

   * Example: Students enrolled in *both* DBMS and DSA.

---

6. **Cartesian Product (×)** → Combines every tuple of one relation with every tuple of another.

   * Example: Student × Course → Produces all possible Student–Course pairs (used for Joins).

---

7. **Rename (ρ)** → Renames relations or attributes.

   * Example: Rename Student as Learner.

     ```
     ρ Learner(Student)
     ```

---

### 2.2 Advanced Operators

1. **Join (⨝)** → Combines related tuples.

   * Example: Get student names with course titles.

     ```
     Student ⨝ Student.CourseID = Course.CourseID Course
     ```

     Result:

     ```
     Jenil → DBMS
     Mahir → DSA
     Arjun → DBMS
     Yashvi → OS
     ```

---

2. **Division (÷)** → Finds tuples related to *all values* in another relation.

   Example:

   * **Enrollment(RollNo, CourseID)**
   * **RequiredCourses(CourseID)** = {CS101, CS102}

   Query: Find students enrolled in *all required courses*.

   ```
   Enrollment ÷ RequiredCourses
   ```

---

## 3. Tuple Relational Calculus (Declarative)

In **TRC**, we write conditions on tuples, not how to compute them.

### Syntax

```
{ t | Condition(t) }
```

Where `t` is a tuple variable.

---

### Examples

1. Get names of students from Surat.

```
{ t.Name | Student(t) ∧ t.City = 'Surat' }
```

2. Get roll numbers of students enrolled in CS101.

```
{ t.RollNo | Student(t) ∧ t.CourseID = 'CS101' }
```

3. Get names of students with Marks > 80.

```
{ t.Name | Student(t) ∧ t.Marks > 80 }
```

---

## 4. Extended Example Database (CodingGita)

We will use these relations for practice:

**Student(RollNo, Name, City, Semester)**
**Course(CourseID, Title, DeptID, FacultyID)**
**Faculty(FacultyID, Name, Dept)**
**Enrollment(RollNo, CourseID, Marks)**

---

## 5. Practice Problems (Solved)

### Q1: Find names of students from Ahmedabad.

* **RA:** σ City='Ahmedabad' (Student)
* **TRC:** { t.Name | Student(t) ∧ t.City='Ahmedabad' }

---

### Q2: Find roll numbers of students enrolled in CS101.

* **RA:** π RollNo (σ CourseID='CS101' (Enrollment))
* **TRC:** { t.RollNo | Enrollment(t) ∧ t.CourseID='CS101' }

---

### Q3: Find names of students with marks > 85.

* **RA:** π Name (σ Marks>85 (Student ⨝ Enrollment))
* **TRC:** { t.Name | Student(t) ∧ Enrollment(e) ∧ t.RollNo=e.RollNo ∧ e.Marks>85 }

---

### Q4: Find students and the courses they are enrolled in.

* **RA:** Student ⨝ Student.RollNo = Enrollment.RollNo ⨝ Course
* **TRC:** { (s.Name, c.Title) | Student(s) ∧ Course(c) ∧ Enrollment(e) ∧ s.RollNo=e.RollNo ∧ e.CourseID=c.CourseID }

---

### Q5: Find names of faculty teaching DBMS.

* **RA:** π Faculty.Name (Course ⨝ Course.FacultyID=Faculty.FacultyID σ Title='DBMS' (Course))
* **TRC:** { f.Name | Faculty(f) ∧ Course(c) ∧ c.Title='DBMS' ∧ c.FacultyID=f.FacultyID }

---

### Q6: Find students enrolled in *all courses* offered by DeptID = CS.

* **RA:** Enrollment ÷ (π CourseID (σ DeptID='CS' (Course)))
* **TRC:** { s.Name | Student(s) ∧ ∀c (Course(c) ∧ c.DeptID='CS' → ∃e (Enrollment(e) ∧ e.RollNo=s.RollNo ∧ e.CourseID=c.CourseID)) }

---

## 6. Additional Practice Set (For Students)

1. List all student names and their marks in DBMS.
2. Find roll numbers of students who have taken more than 2 courses.
3. Find names of students who share the same city.
4. Get faculty names who teach more than one course.
5. Find students who scored the highest marks in any course.
6. Get all students not enrolled in any course.
7. Find average marks of students in CS101.
8. Find names of students taught by faculty “Krishna”.
9. Find names of students in Semester 3 who are from Surat.
10. Find students enrolled in both DBMS and DSA.

---

## 7. Summary

* **Relational Algebra**: Procedural, step-by-step method (σ, π, ∪, −, ⨝, ÷).
* **Tuple Relational Calculus**: Declarative, specifies only the result condition.
* RA is like **writing instructions**, TRC is like **asking a question**.
* Both form the **mathematical foundation of SQL**.
* With CodingGita examples, we saw how queries map into both RA and TRC.

---
