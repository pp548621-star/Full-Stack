# Transaction Management (Concept and Need for Control)

## 1. Introduction

A **transaction** in DBMS is a **logical unit of work** that transforms the database from one consistent state to another.

Think of it as a **series of database operations grouped into one single task**.
Either **all operations succeed** (Commit) or **none succeed** (Rollback).

ðŸ‘‰ Example (CodingGita fee payment):

* When a student pays fees online, the system:

  1. Deducts money from studentâ€™s bank account.
  2. Updates fee status in CodingGita DB.
  3. Generates a receipt.

This **entire process must succeed as one unit**. If any step fails (e.g., network crash), DBMS rolls back to the original state.

---

## 2. What is a Transaction?

A **transaction** is a sequence of operations that:

1. Starts with a **BEGIN** statement.
2. Includes one or more **read/write database operations**.
3. Ends with either:

   * **COMMIT** (successful execution, changes are permanent).
   * **ROLLBACK** (failure, undo all changes).

### Example (Bank Transfer â€“ Priyesha â†’ Arjun â‚¹500)

1. Debit Priyeshaâ€™s account by 500.
2. Credit Arjunâ€™s account by 500.

If Priyeshaâ€™s debit succeeds but Arjunâ€™s credit fails, DBMS rolls back to maintain consistency.

---

## 3. Why Transaction Control is Needed?

Without proper transaction control, databases face **serious problems** like:

1. **Incomplete Transactions**

   * If Mahirâ€™s fee is deducted but not updated in DB, money is lost.

2. **Inconsistent Data**

   * Studentâ€™s marks updated in one table but not in another â†’ mismatch.

3. **Concurrent Access Issues**

   * Two students registering for the last seat at the same time may both get it.

ðŸ‘‰ Transaction control ensures **data consistency, atomicity, and correctness**.

---

## 4. Properties of Transactions (ACID)

A valid transaction must satisfy **ACID properties**:

1. **Atomicity** (All or Nothing)

   * Transaction is indivisible.
   * Example: Student fee â†’ either deducted & updated completely OR not at all.

2. **Consistency** (Preserve Rules)

   * Database remains valid before and after transaction.
   * Example: Total seats = 60. If Yashvi enrolls, remaining seats = 59.

3. **Isolation** (No Interference)

   * Concurrent transactions should not affect each other.
   * Example: Arjun updating marks should not interfere with Krishna paying fees.

4. **Durability** (Permanent Effect)

   * Once committed, data is permanent even if system crashes.
   * Example: If fee is marked "Paid," it remains paid after power failure.

---

## 5. Transaction States

A transaction moves through different **states** during execution:

1. **Active** â†’ Currently executing.
2. **Partially Committed** â†’ All operations done, waiting to be saved.
3. **Committed** â†’ Changes permanently saved.
4. **Failed** â†’ Error occurred, must rollback.
5. **Aborted** â†’ Rolled back, DB returns to original state.

### Diagram (Textual Representation)

```
[Active] --> [Partially Committed] --> [Committed]
      \                          /
       \--> [Failed] --> [Aborted]
```

---

## 6. Example â€“ CodingGita Student Fee Transaction

### Step 1: Student Krishna pays fees online.

Transaction operations:

1. Deduct â‚¹50,000 from Krishnaâ€™s bank account.
2. Update FeeStatus = "Paid" in Student DB.
3. Generate receipt record.

### Step 2: What if crash happens after step 1?

* Without DBMS: Krishna loses money, but FeeStatus still "Not Paid."
* With DBMS: Transaction fails â†’ **Rollback â†’ No money deducted.**

ðŸ‘‰ DBMS ensures **safe execution** of all 3 steps or none.

---

## 7. Problems Without Transaction Control

If transactions are not managed, issues like:

1. **Lost Update Problem**

   * Two teachers updating the same studentâ€™s marks â†’ one update lost.

2. **Dirty Read Problem**

   * One transaction reads uncommitted changes of another.

3. **Inconsistent Retrieval**

   * Studentâ€™s marks read partly updated, partly old.

These concurrency problems will be studied in **Unit 5 (Concurrency Control)**, but they start with weak transaction handling.

---

## 8. Summary

* A **transaction** is a sequence of DB operations treated as one logical unit.
* Transaction management ensures **all-or-nothing execution**.
* DBMS maintains **ACID properties**: Atomicity, Consistency, Isolation, Durability.
* Transaction states: Active â†’ Partially Committed â†’ Committed OR Failed â†’ Aborted.
* Real-world CodingGita examples: fee payments, course registrations, exam submissions.
* Without transaction control â†’ lost updates, dirty reads, inconsistencies.

---
