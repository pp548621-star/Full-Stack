# SQL Constraints

## 1. Introduction

Constraints are **rules applied to table columns** that ensure the correctness and integrity of data.

ðŸ‘‰ Why important?

* Prevent invalid values (e.g., negative marks).
* Ensure uniqueness (no two students with same RollNo).
* Enforce relationships (CourseID in Student must exist in Course table).

In CodingGitaâ€™s database:

* RollNo must be unique.
* Semester must be between 1â€“8.
* Each course a student enrolls in must exist in Course table.

---

## 2. Types of Constraints

### 2.1 NOT NULL

* Ensures a column **cannot have NULL values**.
* Used when a column must always contain valid data.

**Example â€“ Student Table**

```sql
CREATE TABLE Student (
    RollNo INT PRIMARY KEY,
    Name VARCHAR(50) NOT NULL,
    Semester INT,
    City VARCHAR(30)
);
```

**Valid Insert**

```sql
INSERT INTO Student (RollNo, Name, Semester, City)
VALUES (201, 'Neel', 3, 'Ahmedabad');
```

**Invalid Insert (Error â€“ Name is NULL)**

```sql
INSERT INTO Student (RollNo, Name, Semester, City)
VALUES (202, NULL, 2, 'Surat');
```

---

### 2.2 UNIQUE

* Ensures all values in a column are **different**.
* Unlike PRIMARY KEY, it **allows NULL values**.

**Example â€“ Add Email with UNIQUE Constraint**

```sql
ALTER TABLE Student ADD Email VARCHAR(50) UNIQUE;
```

**Valid Insert**

```sql
INSERT INTO Student (RollNo, Name, Semester, City, Email)
VALUES (203, 'Mahir', 3, 'Rajkot', 'mahir@codinggita.in');
```

**Invalid Insert (Duplicate Email â†’ Error)**

```sql
INSERT INTO Student (RollNo, Name, Semester, City, Email)
VALUES (204, 'Krishna', 3, 'Surat', 'mahir@codinggita.in');
```

---

### 2.3 PRIMARY KEY

* Combines **NOT NULL + UNIQUE**.
* A table can have **only one primary key** (single or composite).

**Example â€“ Student Table**

```sql
CREATE TABLE Student (
    RollNo INT PRIMARY KEY,
    Name VARCHAR(50) NOT NULL,
    Semester INT,
    City VARCHAR(30)
);
```

ðŸ‘‰ RollNo must be **unique and not null**.

**Composite Primary Key Example (Enrollment Table)**

```sql
CREATE TABLE Enrollment (
    RollNo INT,
    CourseID VARCHAR(10),
    Marks INT,
    PRIMARY KEY (RollNo, CourseID)
);
```

---

### 2.4 FOREIGN KEY

* Ensures a column value in one table must **exist in another tableâ€™s primary key**.
* Maintains **referential integrity**.

**Example â€“ Enrollment Refers to Student & Course**

```sql
CREATE TABLE Enrollment (
    RollNo INT,
    CourseID VARCHAR(10),
    Marks INT,
    PRIMARY KEY (RollNo, CourseID),
    FOREIGN KEY (RollNo) REFERENCES Student(RollNo),
    FOREIGN KEY (CourseID) REFERENCES Course(CourseID)
);
```

**Valid Insert**

```sql
INSERT INTO Enrollment VALUES (201, 'CS101', 88);
```

**Invalid Insert (CourseID doesnâ€™t exist â†’ Error)**

```sql
INSERT INTO Enrollment VALUES (201, 'CS999', 70);
```

---

### 2.5 CHECK

* Ensures that a column value satisfies a condition.

**Example â€“ Student Semester Between 1 and 8**

```sql
CREATE TABLE Student (
    RollNo INT PRIMARY KEY,
    Name VARCHAR(50) NOT NULL,
    Semester INT CHECK (Semester >= 1 AND Semester <= 8),
    City VARCHAR(30)
);
```

**Valid Insert**

```sql
INSERT INTO Student VALUES (205, 'Arjun', 5, 'Vadodara');
```

**Invalid Insert (Semester = 10 â†’ Error)**

```sql
INSERT INTO Student VALUES (206, 'Yashvi', 10, 'Rajkot');
```

---

### 2.6 DEFAULT

* Provides a default value when no value is specified.

**Example â€“ Default City = â€˜Ahmedabadâ€™**

```sql
CREATE TABLE Student (
    RollNo INT PRIMARY KEY,
    Name VARCHAR(50) NOT NULL,
    Semester INT,
    City VARCHAR(30) DEFAULT 'Ahmedabad'
);
```

**Insert Without City**

```sql
INSERT INTO Student (RollNo, Name, Semester) VALUES (207, 'Priyesha', 3);
```

**Output Row**

| RollNo | Name     | Semester | City      |
| ------ | -------- | -------- | --------- |
| 207    | Priyesha | 3        | Ahmedabad |

---

## 3. Combined Example â€“ CodingGita Student Table

```sql
CREATE TABLE Student (
    RollNo INT PRIMARY KEY,
    Name VARCHAR(50) NOT NULL,
    Semester INT CHECK (Semester >= 1 AND Semester <= 8),
    City VARCHAR(30) DEFAULT 'Ahmedabad',
    Email VARCHAR(50) UNIQUE
);
```

ðŸ‘‰ Rules applied:

* RollNo â†’ unique, not null (Primary Key).
* Name â†’ cannot be NULL.
* Semester â†’ only between 1â€“8.
* City â†’ default is Ahmedabad if not given.
* Email â†’ must be unique.

---

## 4. Summary

* **NOT NULL** â†’ Value required.
* **UNIQUE** â†’ All values must be different (NULL allowed).
* **PRIMARY KEY** â†’ NOT NULL + UNIQUE (only one per table).
* **FOREIGN KEY** â†’ Enforces referential integrity between tables.
* **CHECK** â†’ Allows only values satisfying condition.
* **DEFAULT** â†’ Assigns default value when none is given.
* Constraints ensure **data validity, uniqueness, and integrity** in CodingGitaâ€™s DB.

---
