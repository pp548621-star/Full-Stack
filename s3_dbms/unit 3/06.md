# SQL Functions

## 1. Introduction

In SQL, **functions** are built-in operations that let us process data quickly without writing extra logic in the application layer.

They can:

* Perform **calculations** (total marks, average, percentages).
* Transform **text** (uppercase names, formatting email IDs).
* Handle **numbers** (rounding, absolute values).
* Manage **dates** (finding today’s date, calculating days left).

👉 Example: In the **CodingGita Student Portal**:

* Faculty uses functions to **calculate averages** of student marks.
* Admin generates reports using **string and date functions**.
* Students check **days left for fee payment deadlines** using date functions.

---

## 2. Types of SQL Functions

1. **Aggregate Functions** → work on multiple rows and return a single result.
2. **Scalar Functions (String, Numeric, Date)** → work on individual values and return one result per row.

---

## 3. Aggregate Functions

### 3.1 SUM() – Find Total

```sql
SELECT SUM(Marks) AS TotalMarks FROM Enrollment;
```

👉 Total marks scored by all students.

---

### 3.2 AVG() – Find Average

```sql
SELECT AVG(Marks) AS AverageMarks FROM Enrollment;
```

👉 Average marks across all students.

---

### 3.3 MIN() and MAX() – Find Smallest & Largest

```sql
SELECT MIN(Marks) AS Lowest, MAX(Marks) AS Highest FROM Enrollment;
```

👉 Lowest & highest marks in a course.

---

### 3.4 COUNT() – Count Rows

```sql
SELECT COUNT(*) AS TotalStudents FROM Student;
```

👉 Number of students in the database.

```sql
SELECT COUNT(Email) FROM Student;
```

👉 Counts students with registered emails (ignores NULLs).

---

## 4. String Functions

### 4.1 UPPER() & LOWER() – Case Conversion

```sql
SELECT UPPER(Name) AS UpperName, LOWER(City) AS LowerCity 
FROM Student;
```

👉 Converts names to uppercase, cities to lowercase.

---

### 4.2 LENGTH() – String Length

```sql
SELECT Name, LENGTH(Name) AS NameLength FROM Student;
```

👉 Shows length of each student’s name.

---

### 4.3 SUBSTR() / SUBSTRING() – Extract Characters

```sql
SELECT SUBSTR(Name, 1, 3) AS ShortName FROM Student;
```

👉 First 3 letters of each student’s name.

---

### 4.4 CONCAT() – Join Strings

```sql
SELECT CONCAT(Name, ' - ', City) AS StudentInfo FROM Student;
```

👉 Displays “Name – City” together.

---

### 4.5 REPLACE() – Replace Substring

```sql
SELECT REPLACE(City, 'abad', 'Town') FROM Student;
```

👉 “Ahmedabad” becomes “AhmedTown”.

---

## 5. Numeric Functions

### 5.1 ROUND() – Round Off Numbers

```sql
SELECT ROUND(88.75, 1) AS Rounded;
```

👉 Output: 88.8

---

### 5.2 CEIL() & FLOOR() – Nearest Integers

```sql
SELECT CEIL(88.25), FLOOR(88.75);
```

👉 Output: 89, 88

---

### 5.3 ABS() – Absolute Value

```sql
SELECT ABS(-55) AS PositiveValue;
```

👉 Output: 55

---

### 5.4 POWER() – Exponent

```sql
SELECT POWER(2, 3) AS Result;
```

👉 Output: 8

---

### 5.5 MOD() – Remainder

```sql
SELECT MOD(17, 5) AS Remainder;
```

👉 Output: 2

---

## 6. Date & Time Functions

### 6.1 CURRENT\_DATE & NOW()

```sql
SELECT CURRENT_DATE, NOW();
```

👉 Output: `2025-08-26 | 2025-08-26 07:40:15`

---

### 6.2 EXTRACT() – Extract Year/Month/Day

```sql
SELECT EXTRACT(YEAR FROM NOW()) AS CurrentYear;
```

👉 Output: 2025

---

### 6.3 DATE\_ADD() & DATE\_SUB() – Add/Subtract Time

```sql
SELECT DATE_ADD(CURRENT_DATE, INTERVAL 30 DAY) AS FeeDeadline;
```

👉 Adds 30 days → useful for fee due dates.

---

### 6.4 DATEDIFF() – Find Difference Between Dates

```sql
SELECT DATEDIFF('2025-12-31', '2025-08-26') AS DaysRemaining;
```

👉 Days left until year-end.

---

### 6.5 LAST\_DAY() – Find Last Date of Month

```sql
SELECT LAST_DAY('2025-08-26') AS MonthEnd;
```

👉 Output: `2025-08-31`

---

## 7. Combined Examples (CodingGitaDB)

### Example 1 – Average Marks per Course

```sql
SELECT CourseID, AVG(Marks) AS AvgMarks
FROM Enrollment
GROUP BY CourseID;
```

👉 Shows course-wise performance.

---

### Example 2 – Student Info Formatting

```sql
SELECT CONCAT(UPPER(Name), ' (', City, ')') AS StudentDetails
FROM Student;
```

👉 Output: `JENIL (Ahmedabad)`

---

### Example 3 – Students by City

```sql
SELECT City, COUNT(*) AS TotalStudents
FROM Student
GROUP BY City;
```

👉 Output: Number of students per city.

---

### Example 4 – Next Exam Date (Adding 7 days)

```sql
SELECT DATE_ADD(CURRENT_DATE, INTERVAL 7 DAY) AS NextExamDate;
```

---

## 8. Summary

* **Aggregate Functions**: SUM, AVG, MIN, MAX, COUNT → Summarize groups of data.
* **String Functions**: UPPER, LOWER, LENGTH, SUBSTR, CONCAT, REPLACE → Handle text.
* **Numeric Functions**: ROUND, CEIL, FLOOR, ABS, POWER, MOD → Handle numbers.
* **Date Functions**: NOW, CURRENT\_DATE, EXTRACT, DATE\_ADD, DATEDIFF, LAST\_DAY → Manage time-based data.
* Functions make SQL queries **smarter, cleaner, and closer to real-world needs** (like CodingGita reports, deadlines, averages).

---
