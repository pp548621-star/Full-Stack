# PL/SQL Control Structures

## 1. Introduction

* PL/SQL is **procedural**, meaning we can control the flow of execution using **conditional statements** and **loops**.
* Control structures let us:

  * Decide which statements to run (**decision making**).
  * Repeat actions multiple times (**iteration**).
  * Exit when conditions are met (**loop control**).

ðŸ‘‰ In **CodingGita portal**:

* IF statements decide whether a student has **passed or failed**.
* Loops can **process all student records** one by one.
* CASE statements can assign **grades (A, B, C)** based on marks.

---

## 2. Conditional Statements

### 2.1 IF Statement

**Syntax**

```sql
IF condition THEN
   statements;
END IF;
```

**Example â€“ Check Passing Marks**

```sql
DECLARE
   marks NUMBER := 75;
BEGIN
   IF marks >= 40 THEN
      DBMS_OUTPUT.PUT_LINE('Student has passed');
   END IF;
END;
/
```

---

### 2.2 IF-ELSE Statement

**Syntax**

```sql
IF condition THEN
   statements1;
ELSE
   statements2;
END IF;
```

**Example â€“ Pass or Fail**

```sql
DECLARE
   marks NUMBER := 35;
BEGIN
   IF marks >= 40 THEN
      DBMS_OUTPUT.PUT_LINE('Student Passed');
   ELSE
      DBMS_OUTPUT.PUT_LINE('Student Failed');
   END IF;
END;
/
```

---

### 2.3 IF-ELSIF-ELSE Statement

**Syntax**

```sql
IF condition1 THEN
   statements1;
ELSIF condition2 THEN
   statements2;
ELSE
   statements3;
END IF;
```

**Example â€“ Assign Grade**

```sql
DECLARE
   marks NUMBER := 82;
BEGIN
   IF marks >= 90 THEN
      DBMS_OUTPUT.PUT_LINE('Grade: A');
   ELSIF marks >= 75 THEN
      DBMS_OUTPUT.PUT_LINE('Grade: B');
   ELSIF marks >= 60 THEN
      DBMS_OUTPUT.PUT_LINE('Grade: C');
   ELSE
      DBMS_OUTPUT.PUT_LINE('Grade: F');
   END IF;
END;
/
```

**Output**

```
Grade: B
```

---

### 2.4 CASE Statement

Cleaner alternative to multiple IF-ELSIF.

**Syntax**

```sql
CASE expression
   WHEN value1 THEN statements1
   WHEN value2 THEN statements2
   ELSE statementsN
END CASE;
```

**Example â€“ Grade Using CASE**

```sql
DECLARE
   marks NUMBER := 95;
   grade CHAR(1);
BEGIN
   grade := CASE
               WHEN marks >= 90 THEN 'A'
               WHEN marks >= 75 THEN 'B'
               WHEN marks >= 60 THEN 'C'
               ELSE 'F'
            END;
   DBMS_OUTPUT.PUT_LINE('Grade: ' || grade);
END;
/
```

---

## 3. Looping Structures

### 3.1 Basic LOOP

Runs until explicitly exited using `EXIT`.

**Example â€“ Print 1 to 5**

```sql
DECLARE
   i NUMBER := 1;
BEGIN
   LOOP
      DBMS_OUTPUT.PUT_LINE('Value: ' || i);
      i := i + 1;
      EXIT WHEN i > 5;
   END LOOP;
END;
/
```

---

### 3.2 WHILE LOOP

Runs as long as condition is true.

**Example â€“ Print Student Roll Numbers 101â€“104**

```sql
DECLARE
   roll NUMBER := 101;
BEGIN
   WHILE roll <= 104 LOOP
      DBMS_OUTPUT.PUT_LINE('RollNo: ' || roll);
      roll := roll + 1;
   END LOOP;
END;
/
```

---

### 3.3 FOR LOOP

Simplest way to loop in PL/SQL.

**Syntax**

```sql
FOR counter IN lower..upper LOOP
   statements;
END LOOP;
```

**Example â€“ Print Semesters 1 to 8**

```sql
BEGIN
   FOR sem IN 1..8 LOOP
      DBMS_OUTPUT.PUT_LINE('Semester: ' || sem);
   END LOOP;
END;
/
```

---

## 4. Nested Loops

Loops inside loops (use carefully).

**Example â€“ Print Student & Their Courses**

```sql
DECLARE
   v_roll Student.RollNo%TYPE;
   v_course Course.Title%TYPE;
BEGIN
   FOR r IN (SELECT RollNo, Name FROM Student) LOOP
      DBMS_OUTPUT.PUT_LINE('Student: ' || r.Name);
      FOR c IN (SELECT C.Title 
                FROM Enrollment E 
                JOIN Course C ON E.CourseID = C.CourseID
                WHERE E.RollNo = r.RollNo) LOOP
         DBMS_OUTPUT.PUT_LINE('   Course: ' || c.Title);
      END LOOP;
   END LOOP;
END;
/
```

---

## 5. EXIT, CONTINUE in Loops

* **EXIT** â†’ Terminates loop.
* **CONTINUE** â†’ Skips current iteration, continues with next.

**Example â€“ Skip Odd Numbers**

```sql
BEGIN
   FOR i IN 1..5 LOOP
      CONTINUE WHEN MOD(i,2)=1; -- skip odd
      DBMS_OUTPUT.PUT_LINE('Even: ' || i);
   END LOOP;
END;
/
```

**Output**

```
Even: 2
Even: 4
```

---

## 6. Summary

* **IF, IF-ELSE, IF-ELSIF, CASE** â†’ decision-making constructs.
* **LOOP, WHILE LOOP, FOR LOOP** â†’ iteration constructs.
* **EXIT/CONTINUE** â†’ control loop execution.
* With control structures, PL/SQL becomes a **real programming language**.
* In **CodingGita DB**, control structures help with:

  * Checking pass/fail.
  * Assigning grades.
  * Processing multiple student/course records.

---
