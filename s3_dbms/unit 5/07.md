# Optimistic Concurrency Control (OCC)

## 1. Introduction

* OCC assumes that **conflicts are rare**.
* Instead of locking data items during transactions, OCC allows transactions to **execute freely**.
* Before committing, the system checks whether a conflict occurred. If conflict â†’ transaction is **rolled back**.

ðŸ‘‰ Itâ€™s like allowing multiple students to edit their notes at once, and at the end checking if two people modified the same sentence.

---

## 2. Phases of Optimistic Concurrency Control

OCC has **three phases**:

### 2.1 Read Phase

* Transaction reads data items into local variables.
* No locks are applied.
* Changes are made only in local workspace, not database.

### 2.2 Validation Phase

* Before commit, system checks if the transaction conflicts with others.
* If validation passes â†’ safe to write.
* If not â†’ transaction aborted and restarted.

### 2.3 Write Phase

* Changes are written to database.
* Commit finalizes updates.

---

## 3. Example 1 â€“ CodingGita Marks Update (No Conflict)

* **T1**: Faculty A reads RollNo 101 Marks = 80, plans to update to 90.
* **T2**: Faculty B reads RollNo 102 Marks = 85, plans to update to 95.

**Phases:**

1. Both T1 and T2 read data (no locks).
2. Validation â†’ no conflict (different students).
3. Both commit successfully.

ðŸ‘‰ Result: Marks updated for both students.

---

## 4. Example 2 â€“ CodingGita Marks Update (Conflict Detected)

* **T1**: Faculty A reads RollNo 101 Marks = 80, plans to update to 90.
* **T2**: Faculty B reads RollNo 101 Marks = 80, plans to update to 95.

**Phases:**

1. Both T1 and T2 read same data (80).
2. Validation â†’ conflict (both modified same item).
3. DBMS allows **only one transaction** (say T1), aborts the other (T2).
4. T2 restarts with fresh read (now reads updated 90).

ðŸ‘‰ Prevents inconsistency.

---

## 5. Example 3 â€“ OCC in Fee Payment

* **T1**: Admin inserts FeePayment record for Student 201.
* **T2**: Another admin also tries to insert FeePayment for same student.

**Validation Phase:**

* Conflict detected (both touching same record).
* One transaction aborted.

---

## 6. Advantages of OCC

1. **No Deadlocks**

   * No locks â†’ no circular waits.
2. **High Performance in Read-heavy Systems**

   * Perfect for portals where most operations are SELECT queries.
3. **Simpler Implementation**

   * No lock management overhead.

---

## 7. Disadvantages of OCC

1. **High Rollback Cost**

   * If many transactions conflict, frequent aborts happen.
2. **Not Good for Write-heavy Systems**

   * Example: If many faculty update marks at once â†’ lots of conflicts.
3. **Starvation Possible**

   * A transaction may keep getting aborted if conflicts keep happening.

---

## 8. CodingGita Case Study

### Scenario â€“ Student Portal

* **Read-heavy tasks**:

  * Students checking marks, timetable, attendance.
  * Admins generating reports.
  * These benefit from OCC (no locks, faster reads).

* **Write-heavy tasks**:

  * Faculty uploading marks at exam time.
  * Admin inserting hundreds of fee records in a batch.
  * Here, OCC may cause many aborts â†’ lock-based methods might be better.

---

## 9. Comparison with Other Methods

| Feature   | Lock-based Protocols | Timestamp-based | Optimistic Concurrency |
| --------- | -------------------- | --------------- | ---------------------- |
| Deadlocks | Possible             | Not possible    | Not possible           |
| Rollbacks | Rare                 | Sometimes       | Frequent in conflicts  |
| Best For  | Mixed workloads      | Strict ordering | Read-heavy workloads   |
| Overhead  | Lock management      | Timestamp mgmt  | Validation checks      |

---

## 10. Summary

* **OCC** assumes conflicts are rare.
* Works in **three phases**: Read â†’ Validate â†’ Write.
* Great for **read-heavy applications** like CodingGitaâ€™s student portal.
* Avoids deadlocks but may cause frequent rollbacks in **write-heavy workloads**.
* In **CodingGita DB**, OCC is useful for student queries (marks, attendance, timetable), but not ideal for **exam result entry day** (too many writes).

---
